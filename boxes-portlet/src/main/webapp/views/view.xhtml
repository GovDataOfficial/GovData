<?xml version="1.0"?>

<f:view xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:head />
  <h:body>
    <div class="row row-margin">
      <div class="column small-12 large-4">
        <h2 class="boxesportlet-title">
          <a href="/web/guest/daten/-/searchresult/s/lastmodification_desc">
            #{i18n['od.datasets_latest_datasets']}
            <span class="label label-inverse more-linklabel">#{i18n['od.more']}</span>
          </a>
        </h2>

        <ul class="row">
          <ui:repeat value="#{datasets.datasets}" var="dataset">
            <li class="column small-12 medium-6 large-12">
              <a href="/web/guest/suchen/-/details/#{dataset.name}" title="#{dataset.title}">
                <div class="boxesportlet-box design-box">
                  <div class="metainfo h2-metainfo">
                    <div class="mediatype-icon mediatype-datensatz">
                      <img src="/govdatastyle-theme/images/mediatypes/typ_datensatz_inverted.svg" alt=""/>
                    </div>
                    <strong>#{i18n['od.dataset']}</strong>
                    <span>
                      <h:outputText value="#{dataset.metadataModified}">
                        <f:convertDateTime pattern="dd.MM.yyyy" />
                      </h:outputText>
                    </span>
                  </div>
                  
                  <h3>#{dataset.title}</h3>
                  <p class="boxtext h2-teaser">
                    <h:outputText value="#{dataset.notes.length() gt 120 ? dataset.notes.substring(0,117).concat('...') : dataset.notes}" />
                  </p>
                  
                  <ui:include src="category.xhtml">
                    <ui:param name="categories" value="#{dataset.categories}" />
                  </ui:include>
                  
                  <ui:include src="licence.xhtml">
                    <ui:param name="isOpen" value="#{dataset.open}" />
                    <ui:param name="licencetext" value="#{dataset.licence.title}" />
                  </ui:include>
                  
                  <div class="goto-entry h2-metainfo">
                    <div>#{i18n['od.goto.datensatz']}</div>
                  </div>
                  <div class="goto-entry-spacer"></div>
                </div>
              </a>
            </li>
          </ui:repeat>
        </ul>
      </div>
      <div class="column small-12 large-4">
        <h2 class="boxesportlet-title">
          <a href="/web/guest/dokumente/-/searchresult/s/lastmodification_desc">
            #{i18n['od.home.recent_documents']} 
            <span class="label label-inverse more-linklabel">#{i18n['od.more']}</span>
          </a>
        </h2>
        
        <ul class="row">
          <ui:repeat value="#{documents.documents}" var="document">
            <li class="column small-12 medium-6 large-12">
              <a href="/web/guest/suchen/-/details/#{document.name}" title="#{document.title}" class="box-title">
                <div class="boxesportlet-box design-box">
                  <div class="metainfo h2-metainfo">
                    <div class="mediatype-icon mediatype-dokument">
                      <img src="/govdatastyle-theme/images/mediatypes/typ_dokument_inverted.svg" alt=""/>
                    </div>
                    <strong>#{i18n['od.document']}</strong>
                    <span>
                      <h:outputText value="#{document.metadataModified}">
                        <f:convertDateTime pattern="dd.MM.yyyy" />
                      </h:outputText>
                    </span>
                  </div>
                  
                  <h3>#{document.title}</h3>
                  <p class="boxtext h2-teaser">
                    <h:outputText value="#{document.notes.length() gt 120 ? document.notes.substring(0,117).concat('...') : document.notes}" />
                  </p>
                  
                  <ui:include src="category.xhtml">
                    <ui:param name="categories" value="#{document.categories}" />
                  </ui:include>
                  
                  <ui:include src="licence.xhtml">
                    <ui:param name="isOpen" value="#{document.open}" />
                    <ui:param name="licencetext" value="#{document.licence.title}" />
                  </ui:include>
                  
                  <div class="goto-entry h2-metainfo">
                    <div>#{i18n['od.goto.dokument']}</div>
                  </div>
                  <div class="goto-entry-spacer"></div>
                </div>
              </a>
            </li>
          </ui:repeat>
        </ul>
      </div>
      <div class="column small-12 large-4">
        <h2 class="boxesportlet-title">
          <a  href="/web/guest/neues/">
            #{i18n['od.home.recent_blogs']}
            <span class="label label-inverse more-linklabel">#{i18n['od.more']}</span>
          </a>
        </h2>
        
        <ul class="row">
          <ui:repeat value="#{blogs.blogs}" var="blog">
            <li class="column small-12 medium-6 large-12">
              <a href="/web/guest/neues/-/blogs/#{blog.urlTitle}" title="#{blog.title}" class="box-title">
                <div class="boxesportlet-box design-box">
                  <div class="metainfo h2-metainfo">
                    <div class="mediatype-icon mediatype-blog">
                      <img src="/govdatastyle-theme/images/mediatypes/typ_blog_inverted.svg" alt=""/>
                    </div>
                    <strong>#{i18n['od.blog']}</strong>
                    <span>
                      <h:outputText value="#{blog.displayDate}">
                        <f:convertDateTime pattern="dd.MM.yyyy" />
                      </h:outputText>
                    </span>
                  </div>
                  
                  <h3>#{blog.title}</h3>
                  <p class="boxtext h2-teaser">
                    <c:if test="#{not empty blog.description}">
                      <h:outputText value="#{blog.description}" />
                    </c:if>
                    <c:if test="#{empty blog.description}">
                      <h:outputText value="#{blog.content.length() gt 120 ? blog.content.substring(0,117).concat('...') : blog.content}" />
                    </c:if>
                  </p>
                  
                  <div class="goto-entry h2-metainfo">
                    <div>#{i18n['od.goto.blog']}</div>
                  </div>
                  <div class="goto-entry-spacer"></div>
                </div>
              </a>
            </li>
          </ui:repeat>
        </ul>
      </div>
    </div>
  </h:body>
</f:view>
